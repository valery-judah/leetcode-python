{
  "category": "",
  "id": "1028",
  "name": "Recover a Tree From Preorder Traversal",
  "difficulty": "Hard",
  "leetcode_url": "https://leetcode.com/problems/recover-a-tree-from-preorder-traversal/",
  "slug": "recover-a-tree-from-preorder-traversal",
  "isPaidOnly": false,
  "tags": [
    "String",
    "Tree",
    "Depth-First Search",
    "Binary Tree"
  ],
  "similar_questions": [],
  "questionId": "1093",
  "questionFrontendId": "1028",
  "title": "Recover a Tree From Preorder Traversal",
  "titleSlug": "recover-a-tree-from-preorder-traversal",
  "content": "<p>We run a&nbsp;preorder&nbsp;depth-first search (DFS) on the <code>root</code> of a binary tree.</p>\n\n<p>At each node in this traversal, we output <code>D</code> dashes (where <code>D</code> is the depth of this node), then we output the value of this node.&nbsp; If the depth of a node is <code>D</code>, the depth of its immediate child is <code>D + 1</code>.&nbsp; The depth of the <code>root</code> node is <code>0</code>.</p>\n\n<p>If a node has only one child, that child is guaranteed to be <strong>the left child</strong>.</p>\n\n<p>Given the output <code>traversal</code> of this traversal, recover the tree and return <em>its</em> <code>root</code>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2024/09/10/recover_tree_ex1.png\" style=\"width: 423px; height: 200px;\" />\n<pre>\n<strong>Input:</strong> traversal = &quot;1-2--3--4-5--6--7&quot;\n<strong>Output:</strong> [1,2,5,3,4,6,7]\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2024/09/10/recover_tree_ex2.png\" style=\"width: 432px; height: 250px;\" />\n<pre>\n<strong>Input:</strong> traversal = &quot;1-2--3---4-5--6---7&quot;\n<strong>Output:</strong> [1,2,5,3,null,6,null,4,null,7]\n</pre>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2024/09/10/recover_tree_ex3.png\" style=\"width: 305px; height: 250px;\" />\n<pre>\n<strong>Input:</strong> traversal = &quot;1-401--349---90--88&quot;\n<strong>Output:</strong> [1,401,null,349,88,90]\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li>The number of nodes in the original tree is in the range <code>[1, 1000]</code>.</li>\n\t<li><code>1 &lt;= Node.val &lt;= 10<sup>9</sup></code></li>\n</ul>\n",
  "likes": 2271,
  "dislikes": 69,
  "stats": {
    "totalAccepted": "160.2K",
    "totalSubmission": "192.3K",
    "totalAcceptedRaw": 160220,
    "totalSubmissionRaw": 192346,
    "acRate": "83.3%"
  },
  "topicTags": [
    {
      "name": "String",
      "slug": "string"
    },
    {
      "name": "Tree",
      "slug": "tree"
    },
    {
      "name": "Depth-First Search",
      "slug": "depth-first-search"
    },
    {
      "name": "Binary Tree",
      "slug": "binary-tree"
    }
  ],
  "metaData": {
    "name": "recoverFromPreorder",
    "params": [
      {
        "name": "traversal",
        "type": "string"
      }
    ],
    "return": {
      "type": "TreeNode"
    }
  },
  "discussion_posts": [
    {
      "name": "princekumar89",
      "year": 2024,
      "content": "upvote me to downvote if anyone says easy problem",
      "voteCount": 357
    },
    {
      "name": "mansi090",
      "year": 2025,
      "content": "Calling a hard problem \\'easy\\' doesn\\'t make you smarter, but it might make someone else feel discouraged. Let\\u2019s keep the discussion constructive!",
      "voteCount": 172
    },
    {
      "name": "Edwards310",
      "year": 2025,
      "content": "***Today is my birthday \\uD83C\\uDF82 and I\\'m completing my 450th day streak as well \\u2764\\uFE0F\\u200D\\uD83E\\uDE79. A long but short journey to go on LeetCode and many much things to learn***",
      "voteCount": 150
    },
    {
      "name": "legiatuan1998",
      "year": 2024,
      "content": "This looks pretty hard to me, I dont understand why you guy said it easy",
      "voteCount": 101
    },
    {
      "name": "Tipra",
      "year": 2023,
      "content": "This is definitely one of the \"easier\" hard questions, given that stupid me was able to solve it.",
      "voteCount": 90
    },
    {
      "name": "KarthikVarma19",
      "year": 2025,
      "content": "This is an Upcoming POTD Problem For Sure",
      "voteCount": 52
    },
    {
      "name": "yzch1128",
      "year": 2023,
      "content": "I was asked a very similar question during a FAANG on-site interview. But that question was better wrapped and you had to realize it is in fact a preorder sequence of an n-ary tree and then rebuild it, and then do some traversal to implement some other functions required by the interviewer. The interview was only 45mins and you had at most 40mins for the coding, and this question is like the first half of the coding.\\nSo if you are able to understand and code this problem bug free within 20 mins, you should be more than qualify to pass FAANG coding interview.\\nThe question itself is definitely not hard.",
      "voteCount": 41
    },
    {
      "name": "quidcain",
      "year": 2025,
      "content": "the hardest part for me was parsing the input",
      "voteCount": 38
    },
    {
      "name": "ashokvarma5247",
      "year": 2025,
      "content": "LeetCode hard problems are like Onions\u2014they have layers, they make you cry, and they always find a way to ruin your day\ud83d\ude05\ud83d\udc80.",
      "voteCount": 32
    },
    {
      "name": "code2478",
      "year": 2025,
      "content": "Here are some testcases for you guys ------------------->\\n```python\\n\"36614-87155--30317---819----32119----33996-----91491------80717-------58464-------34540------91297-----53944------19005-------49751-------50429------61284-------57924-------51132---57125----73208-----5189------48642-------19213-------71120------22062-------34049-----820------22317-------67901-------89640----95327-----87353------56210-------8419-------24846------67932-------94668-------88471-----23702------52076-------4264------94114-------34577-------85697--35269---59810----81678-----97205------59692-------28868-------51659------20711-------34858-------75887-----55145------2160---48832----22968-----94942------35736-------49355-------82054------43186-------31423-------89274-----84191------65738-------5290-------69981------53247----33621-----96210------71530-------72830-------31850------23697-------14831\"\\n\"27234-23028--53530--32147---7243----98570-----34250------4427-------38255-------31962------43722-------48937-------33556-----6474------67285-------67732-------44074------44440-------485---52627----96511-----51958------92997-------24831-------49498----79477-----36420------42464-------21520-------64536------54608-------22517-------85856-----48118------5328-------62294-68951--55018---69262----84971-----54036------8345-------92499------84311-------74312-------21283-----10559------3972----27586-----44477------15570-------30425-------83527------56214-------89394-----94441------85070-------7804------52026-------34728-------74671---76497----62597-----8280------26229-------4986-----53052------13343-------93290-------99871------33743-------50336-------36172\"\\n\"38872-63460--11291---75437----93452-----64596------22161-------38222------55852-------62924-----29417------83418-------69413-------87490------39493-------45953-------57566----97284-----38737------89461-------84675-------15463------12042-------56551-----3006------23903-------23627-------86372------2586-------57446---43700----17505-----9854------85006-------28957-------76012-----39218------88477-------15736-------47492--88673-76738--18166---43475----78226-----2183------46242-------18805-------46471------89530-------59202-------21258-----24243------60440-------51750------87623-------51081--96991---23087----54565-----14878------47558-------51272-----7910------41593-------23019-------13382------34059-------36926-------91050---83790----75598-----58163------6407-------18288-------39899------18981-------30475-----46690------28497-------85320-------88544------50615-------82067\"\\n\"88714-57807--72280---30787----39947-----31946------13885-------49570------81339-------72671-----1329------38206-------56920-------29498------64120-------61160----9302-----77735------59057-------24247-------65448------64959-------80508-------3254---63571----65190-----65585------59616-------36400-------50073------2308-------94488-------28616--53336---93796----55813-----43504------64059-------91637-------67409------40372-------91446-------93547-----22823------59176-------80112-------63379------27221-------63570-------55916----6646-----70108------99673-------95788-------70081------92263-------39225-------83805-----95887------21893-------9184-------22987------48998-------69415---85252----61953-----48691------96968-------99867-------82360------89424-------57654-------88101-----14606------49796-------71753-------85780------10696-------72106----77306-----11457------49196-------12589-------30363------35255-------50434-----29496------42332-------76856-------82389------8017\"\\n\"37567-858--39362---68055----88819-----3997------79420-------39667----72161-----75769------91480-------83767------15856-------4542-------95646-----11670---28479----57316-----47318------66549-------34556-------25487------2278-------31169-----35018----60244-----49902------82680-------19297------99513-------27027-------95333-----43436------79442-------58820-------10427------80151-------9758-------48051--3259---17643----62656-----76548------95628-------34904-------21359-----60722------55119-------96623-------50519------96636-------62247-------81609---25207----69824-----41026------60104-------68054-------45266-----76835------80500-------32636-------38530------2355-------85683-------5882----10351-----70875------37288-------15088-------7268------32314-------14316-------7027-----64470-41491--66547---26387----14328-----2893------56332-------71276-------39141-----87181------1749-------16670-------14904------50370-------18424-------5929----61794-----68726------25695-------78395-------86197------7890-------51382-------97621-----54981------53503-------64579-------46697------31933-------54952-------20396---38172----18002-----9945------22807-------61696-------28824-----72067------496-------8533-------2796------32792-------45632\"\\n\"5740-89866--58148---51301----10280-----35920-----85836------95252-------70572----64681-----89802------83675-------24343------97118-------69495-86578--58653---81882----501-----75852------74624-------33911-------31638------40827-------15349-------72415-----58128------9272-------41257-------57909------52568-------4584-------18265---87316----92500-----70600------69670-------12716-------79872------56040-------62712-------97004-----17009------25050-------52277-------63792------75663-------9430----7761-----59073--31598---80422----99978-----36190------62185-------48915------35578-------75393-------95970-----34086------45566-------46722------5787-------88201-------88613----61115-----57320------13239-------61590-------78929------36687-------62516-----75701------13188-------93020-------34138------37548-------77383---72061\"\\n\"12658-20593--64324---78605---20778----32447-----75898------49143-------83204------12452-------26120----92380-----86265------86464-------30831-------92145-----39258------74925-------6579-61057--55008---77648----81796-----66034------38307-------33121---81363----95921-----9774------7977-------27101------7694-------39185-----82644------87205-------57075-------85589------85260-------24515-------14945----48532-----28949------61006-------47610-------57757-----56571------23730-------80575-------21430------5071-------45097-------16498--2711---3278----39175-----53594------67717-------69241-------38957----21437-----2996------84838-------89097-------35595------8744-------29450-------17137\"\\n\"83200-46039-84996--78275---35115---19477----17977-----20915------27275-------18214-------4662-----3386------48119-------38668------88981-------39777-------39924----66123-----66096------14499-------12108-------32446------14600-------36203-------25814\"\\n```\\nRandomly generated test cases using the web extension LeetTest!\\nAlso provides up to date company tags and elo rating for problems!\\nDownloadable on the Chrome webstore or Firefox addons and works for most leetcode problems\\n",
      "voteCount": 18
    }
  ]
}
