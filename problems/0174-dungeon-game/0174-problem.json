{
  "category": "",
  "id": "174",
  "name": "Dungeon Game",
  "difficulty": "Hard",
  "leetcode_url": "https://leetcode.com/problems/dungeon-game/",
  "slug": "dungeon-game",
  "isPaidOnly": false,
  "tags": [
    "Array",
    "Dynamic Programming",
    "Matrix"
  ],
  "similar_questions": [
    {
      "title": "Unique Paths",
      "difficulty": "Medium",
      "slug": "unique-paths"
    },
    {
      "title": "Minimum Path Sum",
      "difficulty": "Medium",
      "slug": "minimum-path-sum"
    },
    {
      "title": "Cherry Pickup",
      "difficulty": "Hard",
      "slug": "cherry-pickup"
    },
    {
      "title": "Minimum Path Cost in a Grid",
      "difficulty": "Medium",
      "slug": "minimum-path-cost-in-a-grid"
    },
    {
      "title": "Minimum Health to Beat Game",
      "difficulty": "Medium",
      "slug": "minimum-health-to-beat-game"
    },
    {
      "title": "Paths in Matrix Whose Sum Is Divisible by K",
      "difficulty": "Hard",
      "slug": "paths-in-matrix-whose-sum-is-divisible-by-k"
    },
    {
      "title": "Check if There is a Path With Equal Number of 0's And 1's",
      "difficulty": "Medium",
      "slug": "check-if-there-is-a-path-with-equal-number-of-0s-and-1s"
    }
  ],
  "questionId": "174",
  "questionFrontendId": "174",
  "title": "Dungeon Game",
  "titleSlug": "dungeon-game",
  "content": "<p>The demons had captured the princess and imprisoned her in <strong>the bottom-right corner</strong> of a <code>dungeon</code>. The <code>dungeon</code> consists of <code>m x n</code> rooms laid out in a 2D grid. Our valiant knight was initially positioned in <strong>the top-left room</strong> and must fight his way through <code>dungeon</code> to rescue the princess.</p>\n\n<p>The knight has an initial health point represented by a positive integer. If at any point his health point drops to <code>0</code> or below, he dies immediately.</p>\n\n<p>Some of the rooms are guarded by demons (represented by negative integers), so the knight loses health upon entering these rooms; other rooms are either empty (represented as 0) or contain magic orbs that increase the knight&#39;s health (represented by positive integers).</p>\n\n<p>To reach the princess as quickly as possible, the knight decides to move only <strong>rightward</strong> or <strong>downward</strong> in each step.</p>\n\n<p>Return <em>the knight&#39;s minimum initial health so that he can rescue the princess</em>.</p>\n\n<p><strong>Note</strong> that any room can contain threats or power-ups, even the first room the knight enters and the bottom-right room where the princess is imprisoned.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2021/03/13/dungeon-grid-1.jpg\" style=\"width: 253px; height: 253px;\" />\n<pre>\n<strong>Input:</strong> dungeon = [[-2,-3,3],[-5,-10,1],[10,30,-5]]\n<strong>Output:</strong> 7\n<strong>Explanation:</strong> The initial health of the knight must be at least 7 if he follows the optimal path: RIGHT-&gt; RIGHT -&gt; DOWN -&gt; DOWN.\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<pre>\n<strong>Input:</strong> dungeon = [[0]]\n<strong>Output:</strong> 1\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>m == dungeon.length</code></li>\n\t<li><code>n == dungeon[i].length</code></li>\n\t<li><code>1 &lt;= m, n &lt;= 200</code></li>\n\t<li><code>-1000 &lt;= dungeon[i][j] &lt;= 1000</code></li>\n</ul>\n",
  "likes": 6104,
  "dislikes": 118,
  "stats": {
    "totalAccepted": "271.4K",
    "totalSubmission": "679.5K",
    "totalAcceptedRaw": 271366,
    "totalSubmissionRaw": 679482,
    "acRate": "39.9%"
  },
  "topicTags": [
    {
      "name": "Array",
      "slug": "array"
    },
    {
      "name": "Dynamic Programming",
      "slug": "dynamic-programming"
    },
    {
      "name": "Matrix",
      "slug": "matrix"
    }
  ],
  "metaData": {
    "name": "calculateMinimumHP",
    "params": [
      {
        "name": "dungeon",
        "type": "integer[][]"
      }
    ],
    "return": {
      "type": "integer"
    }
  },
  "discussion_posts": [
    {
      "name": "hhzsls",
      "year": 2015,
      "content": "Why we fill the table from the bottom right corner to left top?",
      "voteCount": 50
    },
    {
      "name": "clue",
      "year": 2015,
      "content": "As we all know the typical solution is via DP, which is also the given solution. I can't think of how it can relate to binary search, any ideas?",
      "voteCount": 21
    },
    {
      "name": "david500",
      "year": 2021,
      "content": "I started this question trying to start from the top left, couldn\\'t sovle it and realized it\\'s best to solve it from the bottom right corner instead. Now I\\'m wondering if it\\'s even possible to do it from the top left, if anyone knows, please share",
      "voteCount": 14
    },
    {
      "name": "kimeshgupta",
      "year": 2015,
      "content": "Can we solve this by start from dungeon[0][0] instead of dungeon[row-1][column-1] and get final result at dungeon[row-1][column-1] using same or another dp approach??? Please help.",
      "voteCount": 11
    },
    {
      "name": "mmontgomery",
      "year": 2018,
      "content": "Submitting my answer, I\\'m told my code gets the wrong answer for a very simple input `[[0,0]]`, but when I run a custom testcase with this same input, I get the correct answer. What gives? \\n\\n![image](https://assets.leetcode.com/users/mmontgomery/image_1538528784.png)\\n\\nThis isn\\'t the first time this has happened to me on Leetcode problems. ",
      "voteCount": 11
    },
    {
      "name": "thevirtuoso1973",
      "year": 2020,
      "content": "As usual I like to provide hints,  albeit this one is slightly less of a hint and more of a reassurance.\\n\\nThis is a pure DP question. The difficulty lies in defining your subproblems/recursion. Some special trick is _not_ necessary to solve the question.\\n\\n### Further Hint:\\nI can\\'t say much more without entering spoiler territory, but just think about how you can figure out the minimum health at (i,j) assuming you have the (i+1,j) and (i,j+1) solutions.",
      "voteCount": 10
    },
    {
      "name": "bingcoder",
      "year": 2015,
      "content": "in this case [[100]] , why the correct output is 1? I think it should be 0.",
      "voteCount": 8
    },
    {
      "name": "god_like",
      "year": 2021,
      "content": "The description didn\\'t mention if the health could boost exceed the knight\\'s initial health, which would make a whole lot difference if that\\'s considered.\\n\\nImaging this: \\n[[0, 100, -98]] \\n\\nthe answer could be either 1 or 99.",
      "voteCount": 7
    },
    {
      "name": "aboulmagd",
      "year": 2020,
      "content": "So why does bottom up DP work when started from the bottom right cell, and not from the top left cell?\\n\\nAny intuition/visuals would really help.\\nI was only able to solve this problem using the former approach, but why is the DP not symmetrical as with other problems (i.e maximum subarray)?",
      "voteCount": 5
    },
    {
      "name": "backslash057",
      "year": 2025,
      "content": "For those using DP expanding from topl-left top bottom-right. Try this test case first\\n\\n[[1,-3,3],[0,-2,0],[-3,-3,-3]]",
      "voteCount": 4
    }
  ]
}
