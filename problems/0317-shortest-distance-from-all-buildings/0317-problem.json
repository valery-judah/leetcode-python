{
  "category": "",
  "id": "317",
  "name": "Shortest Distance from All Buildings",
  "difficulty": "Hard",
  "leetcode_url": "https://leetcode.com/problems/shortest-distance-from-all-buildings/",
  "slug": "shortest-distance-from-all-buildings",
  "isPaidOnly": true,
  "tags": [
    "Array",
    "Breadth-First Search",
    "Matrix"
  ],
  "similar_questions": [
    {
      "title": "Walls and Gates",
      "difficulty": "Medium",
      "slug": "walls-and-gates"
    },
    {
      "title": "Best Meeting Point",
      "difficulty": "Hard",
      "slug": "best-meeting-point"
    },
    {
      "title": "As Far from Land as Possible",
      "difficulty": "Medium",
      "slug": "as-far-from-land-as-possible"
    }
  ],
  "questionId": "317",
  "questionFrontendId": "317",
  "title": "Shortest Distance from All Buildings",
  "titleSlug": "shortest-distance-from-all-buildings",
  "content": "<p>You are given an <code>m x n</code> grid <code>grid</code> of values <code>0</code>, <code>1</code>, or <code>2</code>, where:</p>\n\n<ul>\n\t<li>each <code>0</code> marks <strong>an empty land</strong> that you can pass by freely,</li>\n\t<li>each <code>1</code> marks <strong>a building</strong> that you cannot pass through, and</li>\n\t<li>each <code>2</code> marks <strong>an obstacle</strong> that you cannot pass through.</li>\n</ul>\n\n<p>You want to build a house on an empty land that reaches all buildings in the <strong>shortest total travel</strong> distance. You can only move up, down, left, and right.</p>\n\n<p>Return <em>the <strong>shortest travel distance</strong> for such a house</em>. If it is not possible to build such a house according to the above rules, return <code>-1</code>.</p>\n\n<p>The <strong>total travel distance</strong> is the sum of the distances between the houses of the friends and the meeting point.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2021/03/14/buildings-grid.jpg\" style=\"width: 413px; height: 253px;\" />\n<pre>\n<strong>Input:</strong> grid = [[1,0,2,0,1],[0,0,0,0,0],[0,0,1,0,0]]\n<strong>Output:</strong> 7\n<strong>Explanation:</strong> Given three buildings at (0,0), (0,4), (2,2), and an obstacle at (0,2).\nThe point (1,2) is an ideal empty land to build a house, as the total travel distance of 3+3+1=7 is minimal.\nSo return 7.\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<pre>\n<strong>Input:</strong> grid = [[1,0]]\n<strong>Output:</strong> 1\n</pre>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<pre>\n<strong>Input:</strong> grid = [[1]]\n<strong>Output:</strong> -1\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>m == grid.length</code></li>\n\t<li><code>n == grid[i].length</code></li>\n\t<li><code>1 &lt;= m, n &lt;= 50</code></li>\n\t<li><code>grid[i][j]</code> is either <code>0</code>, <code>1</code>, or <code>2</code>.</li>\n\t<li>There will be <strong>at least one</strong> building in the <code>grid</code>.</li>\n</ul>\n",
  "likes": 1968,
  "dislikes": 341,
  "stats": {
    "totalAccepted": "210.6K",
    "totalSubmission": "472.2K",
    "totalAcceptedRaw": 210615,
    "totalSubmissionRaw": 472160,
    "acRate": "44.6%"
  },
  "topicTags": [
    {
      "name": "Array",
      "slug": "array"
    },
    {
      "name": "Breadth-First Search",
      "slug": "breadth-first-search"
    },
    {
      "name": "Matrix",
      "slug": "matrix"
    }
  ],
  "metaData": {
    "name": "shortestDistance",
    "params": [
      {
        "name": "grid",
        "type": "integer[][]"
      }
    ],
    "return": {
      "type": "integer"
    }
  },
  "discussion_posts": [
    {
      "name": "pppprinciple",
      "year": 2022,
      "content": "\"The distance is calculated using Manhattan Distance, where distance(p1, p2) = |p2.x - p1.x| + |p2.y - p1.y|.\"\\n\\nPlease fix. Looking at the tests, distance is expected to be calculated as number of steps taken in a given path.",
      "voteCount": 77
    },
    {
      "name": "leetcodeuser7863",
      "year": 2021,
      "content": "The problem says the distance from one point to another is the mahattan distance, this should make bfs impossible... I see no solution in the discussion using the mahattan distance. What is going here? Can someone explain? If we use the manhattan distance to calculate the distance between two points how can we detect if there is an obstacle between two 0\\'s? If we can only move point to point and count each move as one, the problem is trivial, but manhattan distance seems to imply diagonal movement.",
      "voteCount": 25
    },
    {
      "name": "sanemiliano",
      "year": 2022,
      "content": "Terrible statement: \"The distance is calculated using Manhattan Distance, where distance(p1, p2) = |p2.x - p1.x| + |p2.y - p1.y|. FIX ASAP. Spent two hours debbuging because I calculate the mahattan distance and turns out the test cases expect the sum of the steps.",
      "voteCount": 20
    },
    {
      "name": "wuyinan",
      "year": 2021,
      "content": "Update:\\nI think I misunderstood this problem... I thought it asks to find an empty location that has access to all the houses and has the smallest sum of manhattan distances to all the houses and return that sum. It actually asks for the smallest sum of total steps to all the houses not Manhattan distances.\\n\\n=============================================================================================\\nTest case:\\n[[1,1,1,1,1,0],[0,0,0,0,0,1],[0,1,1,0,0,1],[1,0,0,1,0,1],[1,0,1,0,0,1],[1,0,0,0,0,1],[0,1,1,1,1,0]]\\n\\nMy code found the position at (3,2) has the shortest sum of distance of 72:\\n\\nPosition: dist to house 1, house 2, ...., sum of distance: \\n\\n6,0 : 1 1  sum: 2\\n5,1 : 6 5 6 7 8 8 3 4 7 3 4 6 2 2 5 1 4 1 2 3 4  sum: 91\\n5,2 : 7 6 5 6 7 7 4 3 6 4 3 5 3 1 4 2 3 2 1 2 3  sum: 84\\n4,1 : 5 4 5 6 7 7 2 3 6 2 3 5 1 1 4 2 5 2 3 4 5  sum: 82\\n2,0 : 2 3 4 5 6 6 1 2 5 1 4 6 2 4 7 3 8 5 6 7 8  sum: 95\\n5,3 : 8 7 6 5 6 6 5 4 5 5 2 4 4 2 3 3 2 3 2 1 2  sum: 85\\n3,1 : 4 3 4 5 6 6 1 2 5 1 2 4 2 2 5 3 6 3 4 5 6  sum: 79\\n1,0 : 1 2 3 4 5 5 2 3 6 2 5 7 3 5 8 4 9 6 7 8 9  sum: 104\\n5,4 : 9 8 7 6 5 5 6 5 4 6 3 3 5 3 2 4 1 4 3 2 1  sum: 92\\n4,3 : 7 6 5 4 5 5 4 3 4 4 1 3 3 1 2 4 3 4 3 2 3  sum: 76\\n3,2 : 5 4 3 4 5 5 2 1 4 2 1 3 3 1 4 4 5 4 3 4 5  sum: 72\\n6,5 : 1 1  sum: 2\\n1,1 : 2 1 2 3 4 4 1 2 5 3 4 6 4 4 7 5 8 5 6 7 8  sum: 91\\n4,4 : 8 7 6 5 4 4 5 4 3 5 2 2 4 2 1 5 2 5 4 3 2  sum: 83\\n1,2 : 3 2 1 2 3 3 2 1 4 4 3 5 5 3 6 6 7 6 5 6 7  sum: 84\\n2,3 : 5 4 3 2 3 3 2 1 2 4 1 3 5 3 4 6 5 6 5 4 5  sum: 76\\n3,4 : 7 6 5 4 3 3 4 3 2 4 1 1 5 3 2 6 3 6 5 4 3  sum: 80\\n1,3 : 4 3 2 1 2 2 3 2 3 5 2 4 6 4 5 7 6 7 6 5 6  sum: 85\\n2,4 : 6 5 4 3 2 2 3 2 1 5 2 2 6 4 3 7 4 7 6 5 4  sum: 83\\n1,4 : 5 4 3 2 1 1 4 3 2 6 3 3 7 5 4 8 5 8 7 6 5  sum: 92\\n0,5 : 1 1  sum: 2",
      "voteCount": 19
    },
    {
      "name": "cosR",
      "year": 2020,
      "content": "To solve this question there are two approaches:\\n1. start bfs from empty position i.e. 0\\n2. start bfs from building position i.e. 1\\n\\nApproach 1 mostly ends up with time ~ 250 ms\\nApproach 2 however ends up with time ~30 ms\\n\\nIs this due to the fact that majority of the test cases have lesser 1s compared to 0s in the grid? What do you think?",
      "voteCount": 10
    },
    {
      "name": "ro_hitman",
      "year": 2023,
      "content": "HARD PROBLEM\\n\\nfor loop through buildings{\\n    bfs from each building\\n    ----MEDIUM PROBLEM----\\n}",
      "voteCount": 8
    },
    {
      "name": "sabrinasong",
      "year": 2016,
      "content": "The question is almost the same as 296 except that here we have obstacles. In 296 we simply calculate its median, while here we have to use bfs. Can we do something on the basis of median solution?",
      "voteCount": 6
    },
    {
      "name": "aivanilov",
      "year": 2023,
      "content": "Testcase 74 / 85 seems broken. For input \\n\\n[[1,1,1,1,1,0],[0,0,0,0,0,1],[0,1,1,0,0,1],[1,0,0,1,0,1],[1,0,1,0,0,1],[1,0,0,0,0,1],[0,1,1,1,1,0]] \\n\\nthere\\u2019s a point [3,2] with distance 72 (instead of required 88). Why the answer is not 72? ",
      "voteCount": 5
    },
    {
      "name": "luckymaster",
      "year": 2022,
      "content": "How the distance is 88 for this test case.\\n\\n[[1,1,1,1,1,0],[0,0,0,0,0,1],[0,1,1,0,0,1],[1,0,0,1,0,1],[1,0,1,0,0,1],[1,0,0,0,0,1],[0,1,1,1,1,0]]\\n\\n\\nMine is 72,\\n\\nLeetcode 88;\\n\\n\\nBuildings = [2,1, 0,0, 2,2, 3,3, 5,5, 0,1, 4,5, 0,2, 3,5, 0,3, 2,5, 0,4, 1,5, 5,0, 6,1, 4,0, 6,2, 3,0, 6,3, 4,2, 6,4] Size true\\nI can visit All buldings from (1,0)[2,1, 0,0, 2,2, 3,3, 5,5, 0,1, 4,5, 0,2, 3,5, 0,3, 2,5, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 3,0, 6,3, 6,4, 4,2]\\nManhatten distance = 104\\nI can visit All buldings from (1,1)[2,1, 2,2, 0,0, 3,3, 5,5, 0,1, 4,5, 0,2, 3,5, 0,3, 2,5, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 3,0, 6,3, 6,4, 4,2]\\nManhatten distance = 91\\nI can visit All buldings from (1,2)[2,1, 2,2, 3,3, 0,0, 5,5, 0,1, 4,5, 0,2, 3,5, 0,3, 2,5, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 3,0, 6,3, 6,4, 4,2]\\nManhatten distance = 84\\nI can visit All buldings from (1,3)[2,1, 3,3, 2,2, 0,0, 5,5, 0,1, 4,5, 0,2, 3,5, 0,3, 2,5, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 3,0, 6,3, 6,4, 4,2]\\nManhatten distance = 85\\nI can visit All buldings from (1,4)[2,1, 3,3, 2,2, 5,5, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 6,3, 3,0, 6,4, 4,2]\\nManhatten distance = 92\\nI can visit All buldings from (2,0)[2,1, 0,0, 2,2, 3,3, 5,5, 0,1, 4,5, 0,2, 3,5, 0,3, 2,5, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 3,0, 6,3, 6,4, 4,2]\\nManhatten distance = 95\\nI can visit All buldings from (2,3)[2,1, 3,3, 2,2, 0,0, 5,5, 0,1, 4,5, 0,2, 3,5, 0,3, 2,5, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 3,0, 6,3, 6,4, 4,2]\\nManhatten distance = 76\\nI can visit All buldings from (2,4)[2,1, 3,3, 2,2, 5,5, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 6,3, 3,0, 6,4, 4,2]\\nManhatten distance = 83\\nI can visit All buldings from (3,1)[2,1, 2,2, 3,3, 5,5, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 4,0, 6,2, 3,0, 6,3, 4,2, 6,4]\\nManhatten distance = 79\\nI can visit All buldings from (3,2)[2,1, 2,2, 3,3, 5,5, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 4,0, 6,2, 3,0, 6,3, 4,2, 6,4]\\nManhatten distance = 72\\nI can visit All buldings from (3,4)[2,1, 3,3, 5,5, 2,2, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 6,3, 3,0, 6,4, 4,2]\\nManhatten distance = 80\\nI can visit All buldings from (4,1)[2,1, 2,2, 3,3, 5,5, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 4,0, 6,2, 3,0, 6,3, 4,2, 6,4]\\nManhatten distance = 82\\nI can visit All buldings from (4,3)[2,1, 3,3, 5,5, 2,2, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 6,3, 3,0, 4,2, 6,4]\\nManhatten distance = 76\\nI can visit All buldings from (4,4)[2,1, 5,5, 3,3, 2,2, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 6,3, 3,0, 6,4, 4,2]\\nManhatten distance = 83\\nI can visit All buldings from (5,1)[2,1, 2,2, 3,3, 5,5, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 4,0, 6,2, 3,0, 6,3, 4,2, 6,4]\\nManhatten distance = 91\\nI can visit All buldings from (5,2)[2,1, 3,3, 5,5, 2,2, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 6,3, 3,0, 4,2, 6,4]\\nManhatten distance = 84\\nI can visit All buldings from (5,3)[2,1, 3,3, 5,5, 2,2, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 6,3, 3,0, 4,2, 6,4]\\nManhatten distance = 85\\nI can visit All buldings from (5,4)[2,1, 5,5, 3,3, 2,2, 0,0, 4,5, 0,1, 3,5, 0,2, 2,5, 0,3, 0,4, 1,5, 6,1, 5,0, 6,2, 4,0, 6,3, 3,0, 6,4, 4,2]\\nManhatten distance = 92",
      "voteCount": 4
    },
    {
      "name": "doublefat",
      "year": 2022,
      "content": "Return the shortest travel distance for such a house. If it is not possible to build such a house according to the above rules, return -1.\\n\\nThe total travel distance is the sum of the distances between the houses of the friends and the meeting point.\\n\\n**The distance is calculated using Manhattan Distance, where distance(p1, p2) = |p2.x - p1.x| + |p2.y - p1.y|.**\\n\\ntest case :\\n\\n\\n[[1,1,1,1,1,0],[0,0,0,0,0,1],[0,1,1,0,0,1],[1,0,0,1,0,1],[1,0,1,0,0,1],[1,0,0,0,0,1],[0,1,1,1,1,0]]\\n\\n![image](https://assets.leetcode.com/users/images/e8af8452-9bcd-4b9c-95b2-c8a1254cc45e_1641067609.3005052.png)\\n\\n1 ,point [3,2] to building [0] [0] distance is 5 , total is 5\\n2 ,point [3,2] to building [0] [1] distance is 4 , total is 9\\n3 ,point [3,2] to building [0] [2] distance is 3 , total is 12\\n4 ,point [3,2] to building [0] [3] distance is 4 , total is 16\\n5 ,point [3,2] to building [0] [4] distance is 5 , total is 21\\n6 ,point [3,2] to building [1] [5] distance is 5 , total is 26\\n7 ,point [3,2] to building [2] [1] distance is 2 , total is 28\\n8 ,point [3,2] to building [2] [2] distance is 1 , total is 29\\n9 ,point [3,2] to building [2] [5] distance is 4 , total is 33\\n10 ,point [3,2] to building [3] [0] distance is 2 , total is 35\\n11 ,point [3,2] to building [3] [3] distance is 1 , total is 36\\n12 ,point [3,2] to building [3] [5] distance is 3 , total is 39\\n13 ,point [3,2] to building [4] [0] distance is 3 , total is 42\\n14 ,point [3,2] to building [4] [2] distance is 1 , total is 43\\n15 ,point [3,2] to building [4] [5] distance is 4 , total is 47\\n16 ,point [3,2] to building [5] [0] distance is 4 , total is 51\\n17 ,point [3,2] to building [5] [5] distance is 5 , total is 56\\n18 ,point [3,2] to building [6] [1] distance is 4 , total is 60\\n19 ,point [3,2] to building [6] [2] distance is 3 , total is 63\\n20 ,point [3,2] to building [6] [3] distance is 4 , total is 67\\n21 ,point [3,2] to building [6] [4] distance is 5 , total is 72\\n\\n![image](https://assets.leetcode.com/users/images/ce6c3d14-8826-4d86-864e-ab7806865d31_1641067774.8862677.png)\\n\\n\\n",
      "voteCount": 3
    }
  ]
}
