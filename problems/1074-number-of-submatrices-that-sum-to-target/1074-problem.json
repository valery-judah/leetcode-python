{
  "category": "",
  "id": "1074",
  "name": "Number of Submatrices That Sum to Target",
  "difficulty": "Hard",
  "leetcode_url": "https://leetcode.com/problems/number-of-submatrices-that-sum-to-target/",
  "slug": "number-of-submatrices-that-sum-to-target",
  "isPaidOnly": false,
  "tags": [
    "Array",
    "Hash Table",
    "Matrix",
    "Prefix Sum"
  ],
  "similar_questions": [
    {
      "title": "Disconnect Path in a Binary Matrix by at Most One Flip",
      "difficulty": "Medium",
      "slug": "disconnect-path-in-a-binary-matrix-by-at-most-one-flip"
    }
  ],
  "questionId": "1145",
  "questionFrontendId": "1074",
  "title": "Number of Submatrices That Sum to Target",
  "titleSlug": "number-of-submatrices-that-sum-to-target",
  "content": "<p>Given a <code>matrix</code>&nbsp;and a <code>target</code>, return the number of non-empty submatrices that sum to <font face=\"monospace\">target</font>.</p>\n\n<p>A submatrix <code>x1, y1, x2, y2</code> is the set of all cells <code>matrix[x][y]</code> with <code>x1 &lt;= x &lt;= x2</code> and <code>y1 &lt;= y &lt;= y2</code>.</p>\n\n<p>Two submatrices <code>(x1, y1, x2, y2)</code> and <code>(x1&#39;, y1&#39;, x2&#39;, y2&#39;)</code> are different if they have some coordinate&nbsp;that is different: for example, if <code>x1 != x1&#39;</code>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2020/09/02/mate1.jpg\" style=\"width: 242px; height: 242px;\" />\n<pre>\n<strong>Input:</strong> matrix = [[0,1,0],[1,1,1],[0,1,0]], target = 0\n<strong>Output:</strong> 4\n<strong>Explanation:</strong> The four 1x1 submatrices that only contain 0.\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<pre>\n<strong>Input:</strong> matrix = [[1,-1],[-1,1]], target = 0\n<strong>Output:</strong> 5\n<strong>Explanation:</strong> The two 1x2 submatrices, plus the two 2x1 submatrices, plus the 2x2 submatrix.\n</pre>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<pre>\n<strong>Input:</strong> matrix = [[904]], target = 0\n<strong>Output:</strong> 0\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= matrix.length &lt;= 100</code></li>\n\t<li><code>1 &lt;= matrix[0].length &lt;= 100</code></li>\n\t<li><code>-1000 &lt;= matrix[i][j] &lt;= 1000</code></li>\n\t<li><code>-10^8 &lt;= target &lt;= 10^8</code></li>\n</ul>\n",
  "likes": 3842,
  "dislikes": 107,
  "stats": {
    "totalAccepted": "166.4K",
    "totalSubmission": "223.3K",
    "totalAcceptedRaw": 166392,
    "totalSubmissionRaw": 223270,
    "acRate": "74.5%"
  },
  "topicTags": [
    {
      "name": "Array",
      "slug": "array"
    },
    {
      "name": "Hash Table",
      "slug": "hash-table"
    },
    {
      "name": "Matrix",
      "slug": "matrix"
    },
    {
      "name": "Prefix Sum",
      "slug": "prefix-sum"
    }
  ],
  "metaData": {
    "name": "numSubmatrixSumTarget",
    "params": [
      {
        "name": "matrix",
        "type": "integer[][]"
      },
      {
        "name": "target",
        "type": "integer"
      }
    ],
    "return": {
      "type": "integer"
    },
    "manual": false
  },
  "discussion_posts": [
    {
      "name": "vanshdhawan60",
      "year": 2024,
      "content": "No RIP streak today, it got over yesterday \\uD83D\\uDE43",
      "voteCount": 150
    },
    {
      "name": "jain_06_07",
      "year": 2023,
      "content": "Asked in interview of MediaNet.",
      "voteCount": 119
    },
    {
      "name": "mhelvens",
      "year": 2019,
      "content": "![image](https://assets.leetcode.com/users/mhelvens/image_1563627416.png)\\n",
      "voteCount": 105
    },
    {
      "name": "yren996",
      "year": 2024,
      "content": "Some of us stated that December was too easy, now we must suffer the consequences! \\uD83E\\uDD72",
      "voteCount": 47
    },
    {
      "name": "MangoTroll34",
      "year": 2024,
      "content": "Thanks for the x2 hard weekend LeetCode :(",
      "voteCount": 44
    },
    {
      "name": "crutch_user",
      "year": 2021,
      "content": "Generalize the this problem to K dimensions.\\n- 1-D: Given an array length n and number T. Count number of subarrays with sum T.\\nSolve by hash table and prefix sums with O(n) time complexity.\\n- 2-D: Given an square matrix (nxn) and number T.  Count number of submatrixes with sum T.\\nCompute prefix sums for all rows - `O(n^2)`. For all columns i and j (i <= j): translate (compress) submatrix  between this columns (inclusive) to array (all elements is sum of row this submatrix) with length n by prefix sums - `O(n)`. Now this is 1D case. Solve by `O(n)` for all (i, j).\\nTotal time complexity: `O(n^2 + n^2 * n) = O(n^3)`.\\n- 3-D: Given an cube (nxnxn) and number T. Count number of subcubes with sum T. \\nSuggest a solution: Cube is array of layers (matrixes). Compute prefix sums for all rows in layers  - `O(n^3)`. For all axes i and j (i <= j): given subcube between this axes (inclusive). Translate (compress) layer of this subcube to array (all elements is sum of row this submatrix) with length n by prefix sums - `O(n^2)`. This arrays form a matrix. Now this is 2D case. Solve by `O(n^3)` for all (i, j).\\nTotal time complexity: `O(n^3 + n^2 * n^3) = O(n^5)`.\\n- K-D: Given an hypercube with k dimensions (nxnxn...xn) and number T. Count number of subhypercubes with sum T.\\nSuggest a solution: use decreasing dimension. Like in cases above we slice hypercube by two axes and compress subhypercube beetween this axes (inclusive) two hypercube with dimension less by one. Use slice\\\\compress while we not giving a 1-D case. Proof this by mathematical induction?\\nTotal time complexity: `O(n^k + n^(1+2*(k-1))) = O(n^(1+2*(k-1)))`.\\n\\nWhat do you think about reasoning above? I would like to see this problem on hypercubes on LeetCode.",
      "voteCount": 37
    },
    {
      "name": "Tarunchourey007",
      "year": 2024,
      "content": "one day before semester exam I invested my 90 minutes but did first hard problem on my own",
      "voteCount": 31
    },
    {
      "name": "sethles",
      "year": 2024,
      "content": "rip streak, friends. x2",
      "voteCount": 19
    },
    {
      "name": "etanila",
      "year": 2024,
      "content": "Seriously? Another hard on a weekend?",
      "voteCount": 17
    },
    {
      "name": "leetcancode",
      "year": 2023,
      "content": "Any similar easy problem to solve before this? I\\'m kind of not able to solve this.",
      "voteCount": 16
    }
  ]
}
